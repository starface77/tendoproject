import{u as j,r as n,E as f,j as e,n as y,t as N,U as v,ae as w,a8 as F,V as k}from"./index-U3rPQCjX.js";const S=t=>{if(!t)return"Не указано";try{return new Date(t).toLocaleDateString("ru-RU")}catch{return"Некорректная дата"}},E=()=>{const{t}=j(),[i,c]=n.useState([]),[u,d]=n.useState(!0),[r,h]=n.useState("all");n.useEffect(()=>{m()},[]);const m=async()=>{try{d(!0);const s=await f.seller.getOrders();s.success?c(s.data||[]):c([])}catch(s){console.error("Ошибка загрузки заказов:",s),c([])}finally{d(!1)}},p=s=>{switch(s){case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x=s=>{switch(s){case"pending":return"Ожидает";case"processing":return"Обрабатывается";case"shipped":return"Отправлен";case"delivered":return"Доставлен";case"cancelled":return"Отменен";default:return s}},g=s=>new Intl.NumberFormat("ru-RU").format(s||0)+" сум",o=i.filter(s=>r==="all"?!0:s.status===r);return u?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Заказы"})}),e.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((s,a)=>e.jsxs("div",{className:"bg-white rounded-lg p-6 border",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]},a))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t("seller.orders.title","Заказы")}),e.jsx("p",{className:"text-gray-600 mt-1",children:t("seller.orders.subtitle","Управляйте заказами ваших товаров")})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:m,className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),t("refresh","Обновить")]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(N,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:t("filter","Фильтр")})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"all",label:"Все"},{key:"pending",label:"Ожидают"},{key:"processing",label:"Обрабатываются"},{key:"shipped",label:"Отправлены"},{key:"delivered",label:"Доставлены"},{key:"cancelled",label:"Отменены"}].map(({key:s,label:a})=>e.jsx("button",{onClick:()=>h(s),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${r===s?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:a},s))})]}),o.length===0?e.jsxs("div",{className:"bg-white rounded-lg border p-8 text-center",children:[e.jsx(v,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t("seller.orders.empty","Нет заказов")}),e.jsx("p",{className:"text-gray-600",children:r==="all"?t("seller.orders.empty_desc","У вас пока нет заказов"):`Нет заказов со статусом "${x(r)}"`})]}):e.jsx("div",{className:"space-y-4",children:o.map(s=>{var a;return e.jsx("div",{className:"bg-white rounded-lg border hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-900",children:["Заказ #",(a=s._id)==null?void 0:a.slice(-8)]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p(s.status)}`,children:x(s.status)})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(w,{className:"h-4 w-4"}),S(s.createdAt)]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"h-4 w-4"}),g(s.totalAmount)]})]})]}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),t("view","Просмотр")]})]}),s.user&&e.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:t("customer","Покупатель")}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.user.firstName," ",s.user.lastName]}),s.user.email&&e.jsx("p",{className:"text-sm text-gray-600",children:s.user.email})]}),s.items&&s.items.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:[t("items","Товары")," (",s.items.length,")"]}),e.jsxs("div",{className:"space-y-2",children:[s.items.slice(0,3).map((l,b)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded flex-shrink-0",children:l.image&&e.jsx("img",{src:l.image,alt:l.name,className:"w-full h-full object-cover rounded"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[l.quantity," × ",g(l.price)]})]})]},b)),s.items.length>3&&e.jsxs("p",{className:"text-sm text-gray-500 text-center py-2",children:["+",s.items.length-3," еще товаров"]})]})]})]})},s._id)})})]})};export{E as default};
