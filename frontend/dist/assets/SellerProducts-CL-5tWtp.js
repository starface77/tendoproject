import{u as S,r as l,E as o,j as e,q as m,B as k,U as d,aa as P,a8 as C,ab as T,V as f,ac as E,ad as L,I as _,C as $}from"./index-U3rPQCjX.js";const U=()=>{const{t:y}=S(),[r,i]=l.useState([]),[b,h]=l.useState(!0),[g,N]=l.useState(""),[n,v]=l.useState("all");l.useEffect(()=>{p()},[]);const p=async()=>{try{h(!0);const s=await o.seller.getProducts();s.success&&i(s.data||s.products||[])}catch(s){console.error("Ошибка загрузки товаров:",s),i([])}finally{h(!1)}},w=async s=>{if(window.confirm("Вы уверены, что хотите удалить этот товар?"))try{(await o.seller.deleteProduct(s)).success?(i(r.filter(a=>a._id!==s)),alert("Товар успешно удален")):alert("Ошибка при удалении товара")}catch(t){console.error("Ошибка удаления товара:",t),alert("Ошибка при удалении товара")}},F=async(s,t)=>{try{const a=t==="active"?"inactive":"active";(await o.seller.updateProduct(s,{status:a})).success?(i(r.map(x=>x._id===s?{...x,status:a}:x)),alert(`Товар ${a==="active"?"активирован":"деактивирован"}`)):alert("Ошибка при изменении статуса товара")}catch(a){console.error("Ошибка изменения статуса:",a),alert("Ошибка при изменении статуса товара")}},j=s=>new Intl.NumberFormat("ru-RU").format(s)+" сум",u=r.filter(s=>{const t=s.name.toLowerCase().includes(g.toLowerCase()),a=n==="all"||s.status===n;return t&&a}),c={total:r.length,active:r.filter(s=>s.status==="active").length,outOfStock:r.filter(s=>s.stock===0).length,totalValue:r.reduce((s,t)=>s+t.price*t.stock,0)};return b?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-tendo-primary"})}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:y("seller.products")}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Управление вашими товарами"})]}),e.jsxs(m,{to:"/seller/products/add",className:"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow hover:shadow-lg transition-all duration-200",children:[e.jsx(k,{className:"h-5 w-5 mr-2"}),"Добавить товар"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 p-6 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(d,{className:"h-6 w-6 text-blue-600"})})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:c.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"Всего товаров"})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 p-6 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx(P,{className:"h-6 w-6 text-green-600"})})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:c.active}),e.jsx("div",{className:"text-sm text-gray-600",children:"Активных"})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 p-6 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:e.jsx(d,{className:"h-6 w-6 text-red-600"})})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:c.outOfStock}),e.jsx("div",{className:"text-sm text-gray-600",children:"Нет в наличии"})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-100 p-6 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:e.jsx(C,{className:"h-6 w-6 text-purple-600"})})}),e.jsx("div",{className:"text-xl font-bold text-gray-900 mb-1",children:j(c.totalValue)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Общая стоимость"})]})]}),e.jsx("div",{className:"bg-white rounded-2xl border border-gray-100 p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),e.jsx("input",{type:"text",placeholder:"Поиск товаров...",value:g,onChange:s=>N(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-tendo-primary focus:border-transparent"})]})}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("select",{value:n,onChange:s=>v(s.target.value),className:"px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-tendo-primary focus:border-transparent",children:[e.jsx("option",{value:"all",children:"Все товары"}),e.jsx("option",{value:"active",children:"Активные"}),e.jsx("option",{value:"inactive",children:"Неактивные"})]})})]})}),e.jsx("div",{className:"bg-white rounded-2xl border border-gray-100 overflow-hidden",children:u.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(d,{className:"h-8 w-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 text-lg font-medium",children:"Товары не найдены"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Попробуйте изменить поисковый запрос или фильтры"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-900",children:"Товар"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-900",children:"Категория"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-900",children:"Цена"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-900",children:"Остаток"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-900",children:"Статистика"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-900",children:"Статус"}),e.jsx("th",{className:"text-left py-4 px-6 font-semibold text-gray-900",children:"Действия"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:u.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-6 px-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-16 h-16 rounded-xl object-cover mr-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",s.id]})]})]})}),e.jsx("td",{className:"py-6 px-6",children:e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-lg text-sm font-medium",children:s.category})}),e.jsx("td",{className:"py-6 px-6",children:e.jsx("div",{className:"font-semibold text-gray-900",children:j(s.price)})}),e.jsx("td",{className:"py-6 px-6",children:e.jsxs("div",{className:`font-semibold ${s.stock===0?"text-red-600":"text-gray-900"}`,children:[s.stock," шт"]})}),e.jsx("td",{className:"py-6 px-6",children:e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(f,{className:"h-4 w-4 mr-1"}),s.views," просмотров"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{className:"h-4 w-4 mr-1"}),s.orders," заказов"]})]})}),e.jsx("td",{className:"py-6 px-6",children:e.jsx("button",{onClick:()=>F(s._id||s.id,s.status),className:"flex items-center",title:s.status==="active"?"Деактивировать":"Активировать",children:s.status==="active"?e.jsx(E,{className:"h-6 w-6 text-green-500"}):e.jsx(L,{className:"h-6 w-6 text-gray-400"})})}),e.jsx("td",{className:"py-6 px-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(m,{to:`/product/${s._id||s.id}`,className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Просмотреть товар",children:e.jsx(f,{className:"h-4 w-4"})}),e.jsx(m,{to:`/seller/products/edit/${s._id||s.id}`,className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Редактировать товар",children:e.jsx(_,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>w(s._id||s.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Удалить товар",children:e.jsx($,{className:"h-4 w-4"})})]})})]},s.id))})]})})})]})};export{U as default};
