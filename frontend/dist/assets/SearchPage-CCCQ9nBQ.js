import{ar as F,$ as L,r as t,E as f,j as e,as as E,ab as y,L as $,t as w,at as H,au as R,av as q,aw as I,ax as V,ah as U}from"./index-U3rPQCjX.js";import{P as W}from"./ProductCard-CLp4hAdG.js";function M(n){return F({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"},child:[]}]})(n)}const D=()=>{const n=L(),[r,d]=t.useState(""),[m,x]=t.useState([]),[i,h]=t.useState(!1),[u,p]=t.useState(null),[v,j]=t.useState(!0),[l,S]=t.useState("all"),[b]=t.useState(["iPhone 15","Samsung Galaxy","MacBook","AirPods","PlayStation","Nintendo Switch","iPad","Apple Watch"]),P=[{id:"all",name:"Все категории",icon:w,count:0},{id:"smartphones",name:"Смартфоны",icon:H,count:12},{id:"laptops",name:"Ноутбуки",icon:M,count:8},{id:"tablets",name:"Планшеты",icon:R,count:6},{id:"headphones",name:"Наушники",icon:q,count:15},{id:"smartwatches",name:"Умные часы",icon:I,count:9},{id:"gaming",name:"Игровые консоли",icon:V,count:5},{id:"cameras",name:"Камеры",icon:U,count:7}];t.useEffect(()=>{const a=new URLSearchParams(n.search).get("q")||"";d(a),a&&o(a)},[n.search]);const o=async s=>{h(!0),p(null);try{const a=await f.checkApiHealth();if(j(a),a){const N=await f.products.searchProducts(s,{page:1,limit:20,category:l!=="all"?l:void 0}),A=N.data||N.products||[];x(A)}else throw new Error("API недоступен")}catch(a){console.error("Ошибка поиска:",a),p(a.message),j(!1),x([])}finally{h(!1)}},C=s=>{if(s.preventDefault(),r.trim()){const a=new URL(window.location);a.searchParams.set("q",r),window.history.pushState({},"",a),o(r)}},g=s=>{d(s);const a=new URL(window.location);a.searchParams.set("q",s),window.history.pushState({},"",a),o(s)},k=s=>{S(s),r.trim()&&o(r)},c=new URLSearchParams(n.search).get("q")||"";return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"container-custom py-8",children:[!v&&e.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-8",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"h-5 w-5 mr-2"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("strong",{children:"API недоступен:"})," Не удается подключиться к серверу. Проверьте подключение к интернету."]})]})}),u&&e.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-8",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Ошибка поиска:"})," ",u]})}),e.jsx("div",{className:"max-w-3xl mx-auto mb-12",children:e.jsxs("form",{onSubmit:C,className:"search-bar",children:[e.jsx("input",{type:"text",value:r,onChange:s=>d(s.target.value),placeholder:"Поиск товаров...",className:"search-input text-lg",autoFocus:!0}),e.jsx("button",{type:"submit",className:"search-button",children:e.jsx(y,{className:"h-6 w-6"})})]})}),c&&e.jsxs("div",{className:"mb-12",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Результаты поиска"}),e.jsx("p",{className:"text-gray-600",children:i?"Поиск...":`Найдено ${m.length} товаров по запросу "${c}"`})]}),i&&e.jsx($,{size:"lg"}),!c&&!i&&e.jsxs("div",{className:"text-center py-16",children:[e.jsxs("div",{className:"mb-12",children:[e.jsx("img",{src:"/images/image (14).png",alt:"Поиск товаров",className:"w-48 h-48 mx-auto rounded-2xl shadow-lg",onError:s=>{s.target.style.display="none",s.target.nextSibling.style.display="flex"}}),e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full items-center justify-center mx-auto mb-6 hidden",children:e.jsx(y,{className:"h-12 w-12 text-gray-400"})})]}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Начните поиск товаров"}),e.jsx("p",{className:"text-gray-600 mb-12",children:"Введите название товара, бренда или категории в поле поиска"}),e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Популярные запросы:"}),e.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:b.map(s=>e.jsx("button",{onClick:()=>g(s),className:"px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-full text-sm font-medium transition-colors",children:s},s))})]})]}),!i&&c&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 sticky top-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(w,{className:"w-5 h-5 mr-2 text-blue-600"}),"Категории"]}),e.jsx("div",{className:"space-y-2",children:P.map(s=>{const a=s.icon;return e.jsxs("button",{onClick:()=>k(s.id),className:`w-full flex items-center justify-between p-3 rounded-lg text-left transition-colors ${l===s.id?"bg-blue-50 text-blue-700 border border-blue-200":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center mr-3 ${l===s.id?"bg-blue-100":"bg-gray-100"}`,children:e.jsx(a,{className:`w-4 h-4 ${l===s.id?"text-blue-600":"text-gray-600"}`})}),e.jsx("span",{className:"font-medium",children:s.name})]}),e.jsx("span",{className:`text-sm ${l===s.id?"text-blue-600":"text-gray-500"}`,children:s.count})]},s.id)})})]})}),e.jsx("div",{className:"lg:col-span-3",children:m.length>0?e.jsx("div",{className:"products-grid",children:m.map(s=>e.jsx(W,{product:s},s.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-6",children:"😔"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Товары не найдены"}),e.jsxs("p",{className:"text-gray-600 mb-8",children:['По запросу "',c,'" ничего не найдено. Попробуйте изменить запрос или категорию.']}),e.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 text-left",children:"Рекомендации:"}),e.jsxs("ul",{className:"text-sm text-gray-600 text-left space-y-1",children:[e.jsx("li",{children:"• Проверьте правильность написания"}),e.jsx("li",{children:"• Используйте более общие термины"}),e.jsx("li",{children:"• Попробуйте синонимы"}),e.jsx("li",{children:"• Уберите лишние слова"})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Попробуйте эти запросы:"}),e.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:b.slice(0,4).map(s=>e.jsx("button",{onClick:()=>g(s),className:"px-4 py-2 bg-blue-50 hover:bg-blue-100 text-blue-600 rounded-full text-sm font-medium transition-colors",children:s},s))})]})]})})]})]})})};export{D as default};
