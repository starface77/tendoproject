import{u as M,a as W,b as R,c as q,d as U,r as c,p as J,j as e,L as D,F as C,e as H,f as S,g as m,h as k,i as Q,k as X,l as Z,m as B,n as G}from"./index-U3rPQCjX.js";const Y=()=>{var w,_;const{t:a}=M(),{id:d}=W(),h=R(),{addToCart:F,isInCart:K}=q(),{addToWishlist:P,removeFromWishlist:L,isInWishlist:g}=U(),[r,T]=c.useState(null),[$,j]=c.useState(!0),[N,f]=c.useState(null),[i,E]=c.useState(0),[n,y]=c.useState(1),[b,v]=c.useState(!1);c.useEffect(()=>{d&&I()},[d]);const I=async()=>{try{j(!0),f(null),console.log("üîç –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–≤–∞—Ä —Å ID:",d);const s=await J.getProduct(d);if(console.log("üì¶ –î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–∞:",s),console.log("üìù Product object:",JSON.stringify(s.data.product,null,2)),s.success&&s.data&&s.data.product){const t={...s.data.product,images:s.data.product.images||[],rating:Number(s.data.product.rating)||Number(s.data.product.averageRating)||0,reviews:s.data.product.reviewCount||s.data.product.reviewsCount||0,price:s.data.product.price||s.data.product.currentPrice||0,oldPrice:s.data.product.oldPrice||s.data.product.originalPrice||null,inStock:s.data.product.inStock!==void 0?s.data.product.inStock:!0,name:s.data.product.name||s.data.product.title||"–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è"};console.log("‚úÖ –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç:",t),T(t)}else throw new Error(a("product_not_found","–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω"))}catch(s){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–∞:",s),f(s.message||"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ç–æ–≤–∞—Ä")}finally{j(!1)}},z=async()=>{var s;if(r)try{v(!0),await F({id:r._id,name:l(r.name,"–¢–æ–≤–∞—Ä"),price:r.price,image:((s=r.images)==null?void 0:s[0])||"",quantity:n}),console.log("‚úÖ –¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É")}catch(t){console.error("‚ùå –û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É:",t)}finally{v(!1)}},A=async()=>{var s;if(r)try{g(r._id)?await L(r._id):await P({id:r._id,name:l(r.name,"–¢–æ–≤–∞—Ä"),price:r.price,image:((s=r.images)==null?void 0:s[0])||"",rating:r.rating})}catch(t){console.error("–û—à–∏–±–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –∏–∑–±—Ä–∞–Ω–Ω—ã–º:",t)}},u=s=>!s||isNaN(s)||s===0?"–¶–µ–Ω–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞":new Intl.NumberFormat("uz-UZ").format(s)+" —Å—É–º",l=(s,t="")=>s?typeof s=="string"?s:typeof s=="number"?s.toString():typeof s=="object"?s.ru||s.uz||s.en?s.ru||s.uz||s.en||t:s.name?l(s.name,t):s.value?l(s.value,t):JSON.stringify(s):t:t,p=s=>{const t=s&&!isNaN(s)?s:0;return Array.from({length:5},(o,x)=>e.jsx(m,{className:`w-4 h-4 ${x<Math.floor(t)?"text-yellow-400 fill-current":"text-gray-300"}`},x))};if($)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx(D,{size:"xl"})});if(r&&typeof r=="object"){console.log("üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º product fields:",Object.keys(r));for(const[s,t]of Object.entries(r))t&&typeof t=="object"&&t.name&&t.value&&t.order&&t._id&&console.warn(`‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–Ω–æ–µ –ø–æ–ª–µ ${s}:`,t)}return N?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-6",children:e.jsx(C,{className:"w-full h-full text-red-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:a("product_not_found","–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω")}),e.jsx("p",{className:"text-gray-600 mb-6",children:N}),e.jsx("button",{onClick:()=>h("/"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:a("go_home","–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é")})]})}):r?e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>h(-1),className:"flex items-center text-blue-600 hover:text-blue-700 transition-colors",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),a("back","–ù–∞–∑–∞–¥")]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-square bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.images&&r.images.length>0?e.jsx("img",{src:typeof r.images[i]=="object"?((w=r.images[i])==null?void 0:w.url)||((_=r.images[i])==null?void 0:_.src)||"":r.images[i]||"",alt:l(r.name,"–¢–æ–≤–∞—Ä"),className:"w-full h-full object-cover",onError:s=>{s.target.style.display="none"}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx(S,{className:"w-12 h-12 text-gray-400"})}),e.jsx("span",{className:"text-gray-400 text-sm",children:a("no_image","–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è")})]})})}),r.images&&r.images.length>1&&e.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:r.images.map((s,t)=>e.jsx("button",{onClick:()=>E(t),className:`flex-shrink-0 w-20 h-20 rounded-lg border-2 overflow-hidden ${i===t?"border-blue-500":"border-gray-200"}`,children:e.jsx("img",{src:typeof s=="object"?(s==null?void 0:s.url)||(s==null?void 0:s.src)||"":s||"",alt:`${l(r.name,"–¢–æ–≤–∞—Ä")} ${t+1}`,className:"w-full h-full object-cover",onError:o=>{o.target.style.display="none"}})},t))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:l(r.name,"–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è")}),e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"flex items-center space-x-1",children:p(Number(r.rating)||0)}),e.jsxs("span",{className:"text-sm text-gray-600",children:[(Number(r.rating)||0).toFixed(1),"/5 (",r.reviews||0," ",a("reviews","–æ—Ç–∑—ã–≤–æ–≤"),")"]})]}),r.seller&&e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold text-lg",children:(r.seller.name||r.seller.storeName||"–ú")[0].toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:r.seller.name||r.seller.storeName||"–ú–∞–≥–∞–∑–∏–Ω"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[r.seller.verified&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(m,{className:"h-4 w-4 text-yellow-500 fill-current"}),e.jsx("span",{children:"–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –ø—Ä–æ–¥–∞–≤–µ—Ü"})]}),r.seller.rating&&e.jsxs("span",{children:["–†–µ–π—Ç–∏–Ω–≥: ",(Number(r.seller.rating)||0).toFixed(1)]})]})]})]}),e.jsx("button",{className:"text-blue-600 text-sm font-medium hover:text-blue-700",children:"–í—Å–µ —Ç–æ–≤–∞—Ä—ã –ø—Ä–æ–¥–∞–≤—Ü–∞"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-900",children:u(r.price)}),r.oldPrice&&e.jsx("span",{className:"text-xl text-gray-500 line-through",children:u(r.oldPrice)})]}),r.oldPrice&&e.jsxs("div",{className:"text-sm text-green-600",children:[a("savings","–≠–∫–æ–Ω–æ–º–∏—è"),": ",u(r.oldPrice-r.price)]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:r.inStock?e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"text-green-600 font-medium",children:a("in_stock","–í –Ω–∞–ª–∏—á–∏–∏")})]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"text-red-600 font-medium",children:a("out_of_stock","–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏")})]})}),r.description&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:a("description","–û–ø–∏—Å–∞–Ω–∏–µ")}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:l(r.description,"–û–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[a("quantity","–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ"),":"]}),e.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[e.jsx("button",{onClick:()=>y(Math.max(1,n-1)),className:"px-3 py-2 text-gray-600 hover:text-gray-900",disabled:n<=1,children:"-"}),e.jsx("span",{className:"px-4 py-2 border-x border-gray-300",children:n}),e.jsx("button",{onClick:()=>y(n+1),className:"px-3 py-2 text-gray-600 hover:text-gray-900",children:"+"})]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("button",{onClick:z,disabled:!r.inStock||b,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:[e.jsx(S,{className:"w-5 h-5 mr-2"}),b?a("adding","–î–æ–±–∞–≤–ª—è–µ–º..."):a("add_to_cart","–í –∫–æ—Ä–∑–∏–Ω—É")]}),e.jsx("button",{onClick:A,className:`px-6 py-3 rounded-lg border transition-colors ${g(r._id)?"border-red-500 bg-red-50 text-red-600":"border-gray-300 text-gray-600 hover:border-red-500 hover:text-red-600"}`,children:e.jsx(Q,{className:`w-5 h-5 ${g(r._id)?"fill-current":""}`})}),e.jsx("button",{className:"px-6 py-3 rounded-lg border border-gray-300 text-gray-600 hover:text-gray-900 transition-colors",children:e.jsx(X,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-6 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Z,{className:"w-6 h-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:a("fast_delivery","–ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞")}),e.jsxs("p",{className:"text-sm text-gray-600",children:["1-2 ",a("days","–¥–Ω—è")]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(B,{className:"w-6 h-6 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:a("warranty","–ì–∞—Ä–∞–Ω—Ç–∏—è")}),e.jsx("p",{className:"text-sm text-gray-600",children:a("official","–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è")})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(G,{className:"w-6 h-6 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:a("return_policy","–í–æ–∑–≤—Ä–∞—Ç")}),e.jsxs("p",{className:"text-sm text-gray-600",children:["14 ",a("days","–¥–Ω—è")]})]})]})]})]})]}),r.specifications&&Object.keys(r.specifications).length>0&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-8",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:a("specifications","–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(r.specifications).map(([s,t])=>e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsxs("span",{className:"font-medium text-gray-700",children:[l(s,s),":"]}),e.jsx("span",{className:"text-gray-900",children:l(t,t)})]},s))})]}),r.features&&r.features.length>0&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-8",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.features.map((s,t)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(k,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:typeof s=="object"&&(s!=null&&s.name)?l(s.name,"–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å"):l(s,typeof s=="string"?s:"–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å")})]},t))})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:[a("reviews","–û—Ç–∑—ã–≤—ã")," (",r.reviews||0,")"]}),e.jsx("button",{className:"text-blue-600 text-sm font-medium hover:text-blue-700",children:"–ù–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤"})]}),e.jsxs("div",{className:"flex items-center space-x-6 mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:(Number(r.rating)||0).toFixed(1)}),e.jsx("div",{className:"flex items-center justify-center space-x-1 mt-1",children:p(r.rating||0)}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["–ò–∑ ",r.reviews||0," –æ—Ç–∑—ã–≤–æ–≤"]})]}),e.jsx("div",{className:"flex-1",children:[5,4,3,2,1].map(s=>e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600 w-2",children:s}),e.jsx(m,{className:"w-3 h-3 text-gray-400"}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${Math.random()*100}%`}})}),e.jsx("span",{className:"text-sm text-gray-500 w-8 text-right",children:Math.floor(Math.random()*20)})]},s))})]}),r.reviewsList&&r.reviewsList.length>0?e.jsx("div",{className:"space-y-6",children:r.reviewsList.map((s,t)=>e.jsx("div",{className:"border-b border-gray-100 last:border-b-0 pb-6 last:pb-0",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-gray-600 font-medium",children:(s.userName||"–£")[0].toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.userName||"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"}),e.jsx("div",{className:"flex space-x-0.5",children:p(s.rating||0)}),e.jsx("span",{className:"text-sm text-gray-500",children:s.date||"–°–µ–≥–æ–¥–Ω—è"})]}),e.jsx("p",{className:"text-gray-700 mb-2",children:s.comment||"–û—Ç–ª–∏—á–Ω—ã–π —Ç–æ–≤–∞—Ä!"}),s.images&&s.images.length>0&&e.jsx("div",{className:"flex space-x-2",children:s.images.map((o,x)=>e.jsx("img",{src:o,alt:"–§–æ—Ç–æ –æ—Ç–∑—ã–≤–∞",className:"w-16 h-16 object-cover rounded border"},x))})]})]})},t))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(m,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ —ç—Ç–æ—Ç —Ç–æ–≤–∞—Ä"}),e.jsx("p",{className:"text-sm",children:"–ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º, –∫—Ç–æ –æ—Å—Ç–∞–≤–∏—Ç –æ—Ç–∑—ã–≤!"})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600",children:a("product_not_found","–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω")}),e.jsx("button",{onClick:()=>h("/"),className:"mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:a("go_home","–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é")})]})})};export{Y as default};
