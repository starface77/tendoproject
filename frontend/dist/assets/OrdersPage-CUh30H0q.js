import{b as f,z as v,u as w,r as n,J as _,j as e,L as k,e as F,U as l,q as b,V as L,W as S,l as A,X as C}from"./index-U3rPQCjX.js";const I=()=>{const j=f(),{isAuthenticated:i}=v(),{t}=w(),[d,o]=n.useState([]),[x,m]=n.useState(!0),[c,u]=n.useState(null);n.useEffect(()=>{i&&h()},[i]);const h=async()=>{try{m(!0),u(null),console.log("üîç –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...");const s=await _.getUserOrders();console.log("‚úÖ –ó–∞–∫–∞–∑—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã:",s),o(s.data||[])}catch(s){console.error("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–∫–∞–∑–æ–≤:",s),u("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞–∫–∞–∑—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É."),o([])}finally{m(!1)}},p=s=>{switch(s){case"pending":return{text:t("order_status_pending","–û–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è"),color:"text-yellow-600",bg:"bg-yellow-100",icon:C};case"confirmed":return{text:t("order_status_confirmed","–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω"),color:"text-blue-600",bg:"bg-blue-100",icon:l};case"shipped":return{text:t("order_status_shipped","–û—Ç–ø—Ä–∞–≤–ª–µ–Ω"),color:"text-purple-600",bg:"bg-purple-100",icon:A};case"delivered":return{text:t("order_status_delivered","–î–æ—Å—Ç–∞–≤–ª–µ–Ω"),color:"text-green-600",bg:"bg-green-100",icon:S};default:return{text:t("order_status_unknown","–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"),color:"text-gray-600",bg:"bg-gray-100",icon:l}}};return x?e.jsx(k,{}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"container-custom py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("button",{onClick:()=>j(-1),className:"flex items-center text-blue-600 hover:text-blue-700 transition-colors mb-6",children:[e.jsx(F,{className:"mr-2"}),t("back","–ù–∞–∑–∞–¥")]}),e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(l,{className:"h-6 w-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:t("my_orders","–ú–æ–∏ –∑–∞–∫–∞–∑—ã")}),e.jsx("p",{className:"text-gray-600",children:t("purchase_history","–ò—Å—Ç–æ—Ä–∏—è –≤–∞—à–∏—Ö –ø–æ–∫—É–ø–æ–∫")})]})]})]}),c&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(l,{className:"h-12 w-12 text-red-500"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:t("loading_error","–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏")}),e.jsx("p",{className:"text-gray-600 mb-6",children:c}),e.jsx("button",{onClick:h,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:t("try_again","–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞")})]}),!c&&d.length===0&&!x?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(l,{className:"h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:t("no_orders_yet","–ó–∞–∫–∞–∑–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç")}),e.jsx("p",{className:"text-gray-600 mb-6",children:t("make_first_order","–°–¥–µ–ª–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑ –∏ –æ–Ω –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å")}),e.jsx(b,{to:"/",className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:t("start_shopping","–ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–∫—É–ø–∫–∞–º")})]}):!c&&e.jsx("div",{className:"space-y-6",children:d.map(s=>{var g;const a=p(s.status),y=a.icon;return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["–ó–∞–∫–∞–∑ ",s.orderNumber||s.id]}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(s.createdAt||s.date||Date.now()).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`px-3 py-1 rounded-full ${a.bg}`,children:e.jsx("span",{className:`text-sm font-medium ${a.color}`,children:a.text})}),e.jsx(b,{to:`/order/${s.id}`,className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",children:e.jsx(L,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"space-y-3",children:s.items&&s.items.length>0?s.items.map((r,N)=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-md flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"üì±"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.name||t("product","–¢–æ–≤–∞—Ä")}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t("quantity","–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ"),": ",r.quantity||1]})]})]}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[new Intl.NumberFormat("uz-UZ").format(r.price||0)," —Å—É–º"]})]},r.id||r._id||N)):e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-gray-500",children:t("product_info_unavailable","–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–∞—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞")})})})]}),e.jsx("div",{className:"px-6 py-4 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y,{className:`h-5 w-5 ${a.color}`}),e.jsxs("span",{className:"text-sm text-gray-600",children:[t("status","–°—Ç–∞—Ç—É—Å"),": ",a.text]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[t("total","–ò—Ç–æ–≥–æ"),":"]}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[new Intl.NumberFormat("uz-UZ").format(((g=s.pricing)==null?void 0:g.total)||s.total||0)," —Å—É–º"]})]})]})})]},s.id||s._id)})})]})})};export{I as default};
