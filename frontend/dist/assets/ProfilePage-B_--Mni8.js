import{u as k,z as R,b as O,r,J as p,K as U,j as e,N as A,L as E,e as P,M as x,O as M,P as W,H as z,Q as y,i as D,g as H,I as $,R as d,S as B,T as I}from"./index-U3rPQCjX.js";const G=()=>{const{t:s,getLocalizedName:J}=k(),{user:t,isAuthenticated:l,isLoading:o,logout:b}=R(),i=O(),[c,m]=r.useState({ordersCount:0,favoritesCount:0,reviewsCount:0,yearsWithUs:0}),[K,h]=r.useState([]),[n,g]=r.useState(!0),[Q,u]=r.useState(!0);r.useEffect(()=>{t&&l&&v()},[t,l]),r.useEffect(()=>{t&&l&&w()},[t,l]);const v=async()=>{var a,f;try{g(!0);const F=((a=(await p.getUserOrders()).data)==null?void 0:a.length)||0,S=((f=(await U.getFavorites()).data)==null?void 0:f.length)||0,L=Math.max(1,Math.floor((Date.now()-new Date(t.createdAt||Date.now()))/(1e3*60*60*24*365)));m({ordersCount:F,favoritesCount:S,reviewsCount:0,yearsWithUs:L})}catch(N){console.error("Ошибка загрузки статистики:",N),m({ordersCount:0,favoritesCount:0,reviewsCount:0,yearsWithUs:1})}finally{g(!1)}},w=async()=>{try{u(!0);const a=await p.getUserOrders({limit:3});h(a.data||[])}catch(a){console.error("Ошибка загрузки заказов:",a),h([])}finally{u(!1)}};if(!o&&!l)return e.jsx(A,{to:"/login",replace:!0});if(o||!t)return e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsx(E,{size:"xl"})});const j=()=>{alert(s("technical_maintenance","Идут технические работы")+". "+s("feature_unavailable","Функция редактирования профиля временно недоступна"))},C=()=>{i("/settings")},_=async()=>{try{await b(),i("/login")}catch(a){console.error("Ошибка при выходе:",a)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24 sm:pb-0",children:[e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4",children:e.jsxs("button",{onClick:()=>i(-1),className:"flex items-center text-blue-600 hover:text-blue-700 transition-colors",children:[e.jsx(P,{className:"mr-2"}),s("back","Назад")]})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-start space-x-4 mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(x,{className:"w-8 h-8 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl text-gray-900 mb-2",children:t.firstName&&t.lastName?`${t.firstName} ${t.lastName}`:s("my_profile","Мой профиль")}),e.jsx("p",{className:"text-xl text-gray-600",children:s("welcome_to_profile","Добро пожаловать в ваш профиль")})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6 md:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl text-gray-900",children:s("personal_information","Личная информация")}),e.jsx("button",{onClick:j,className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:s("edit_profile","Редактировать")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("first_name","Имя")}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(x,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-900",children:t.firstName||s("not_specified","Не указано")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("email","Email")}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(M,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-900",children:t.email})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("phone","Телефон")}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(W,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-900",children:t.phone||s("not_specified","Не указано")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("address","Адрес")}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(z,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-gray-900",children:t.address||s("not_specified","Не указано")})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl text-gray-900 mb-6",children:s("statistics","Статистика")}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(y,{className:"w-6 h-6 text-blue-600"})}),e.jsx("p",{className:"text-2xl text-gray-900",children:n?"...":c.ordersCount}),e.jsx("p",{className:"text-sm text-gray-600",children:s("total_orders","Заказов")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(D,{className:"w-6 h-6 text-red-600"})}),e.jsx("p",{className:"text-2xl text-gray-900",children:n?"...":c.favoritesCount}),e.jsx("p",{className:"text-sm text-gray-600",children:s("favorites","В избранном")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(H,{className:"w-6 h-6 text-green-600"})}),e.jsx("p",{className:"text-2xl text-gray-900",children:n?"...":c.reviewsCount}),e.jsx("p",{className:"text-sm text-gray-600",children:s("reviews","Отзывов")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(x,{className:"w-6 h-6 text-purple-600"})}),e.jsx("p",{className:"text-2xl text-gray-900",children:n?"...":c.yearsWithUs}),e.jsx("p",{className:"text-sm text-gray-600",children:s("years_with_us","Года с нами")})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg text-gray-900 mb-6",children:s("actions","Действия")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:j,className:"w-full flex items-center justify-between p-3 text-left rounded-lg hover:bg-gray-50 transition-colors group",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx($,{className:"w-4 h-4 text-blue-600"})}),e.jsx("span",{className:"text-gray-900",children:s("edit_profile","Редактировать профиль")})]}),e.jsx(d,{className:"w-4 h-4 text-gray-400 group-hover:text-gray-600"})]}),e.jsxs("button",{onClick:C,className:"w-full flex items-center justify-between p-3 text-left rounded-lg hover:bg-gray-50 transition-colors group",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(B,{className:"w-4 h-4 text-gray-600"})}),e.jsx("span",{className:"text-gray-900",children:s("settings","Настройки")})]}),e.jsx(d,{className:"w-4 h-4 text-gray-400 group-hover:text-gray-600"})]}),e.jsxs("button",{onClick:()=>i("/orders"),className:"w-full flex items-center justify-between p-3 text-left rounded-lg hover:bg-gray-50 transition-colors group",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(y,{className:"w-4 h-4 text-green-600"})}),e.jsx("span",{className:"text-gray-900",children:s("my_orders","Мои заказы")})]}),e.jsx(d,{className:"w-4 h-4 text-gray-400 group-hover:text-gray-600"})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4 mt-4",children:e.jsx("button",{onClick:_,className:"w-full flex items-center justify-between p-3 text-left rounded-lg hover:bg-red-50 transition-colors group",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(I,{className:"w-4 h-4 text-red-600"})}),e.jsx("span",{className:"text-red-600",children:s("logout","Выйти")})]})})})]})]})]})]})]})};export{G as default};
