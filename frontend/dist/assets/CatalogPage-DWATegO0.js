import{r,j as e,t as R,F as H,an as j,v as N,ao as O,o as q,$ as G,b as Q,u as V,ap as X,aq as J,p as L,L as K,e as W,Q as A,w as Y,y as Z}from"./index-U3rPQCjX.js";import{P as ee}from"./ProductCard-CLp4hAdG.js";const se=({isOpen:m,onClose:o,categories:v,filters:i,onFilterChange:s,onResetFilters:c,totalProducts:g=0})=>{const[n,b]=r.useState({categories:!0,price:!1,brand:!1,rating:!1}),u=t=>{b(p=>({...p,[t]:!p[t]}))};return r.useEffect(()=>{m||b({categories:!0,price:!1,brand:!1,rating:!1})},[m]),m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden animate-fade-in",onClick:o}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white rounded-t-2xl shadow-2xl z-50 md:hidden max-h-[85vh] overflow-hidden animate-slide-up",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50 rounded-t-2xl",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-5 w-5 text-blue-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹"}),g>0&&e.jsx("span",{className:"text-sm text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:g})]}),e.jsx("button",{onClick:o,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-lg transition-colors",children:e.jsx(H,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>u("categories"),className:"flex items-center justify-between w-full p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸"}),n.categories?e.jsx(j,{className:"h-5 w-5 text-gray-500"}):e.jsx(N,{className:"h-5 w-5 text-gray-500"})]}),n.categories&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("button",{onClick:()=>s("category",""),className:`w-full text-left px-4 py-3 rounded-lg transition-colors ${i.category?"hover:bg-gray-50 text-gray-700":"bg-blue-50 text-blue-600 border-2 border-blue-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Ð’ÑÐµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸"}),e.jsx("span",{className:"text-sm text-gray-500",children:g})]})}),v.map(t=>e.jsx("button",{onClick:()=>s("category",t.id),className:`w-full text-left px-4 py-3 rounded-lg transition-colors ${i.category===t.id?"bg-blue-50 text-blue-600 border-2 border-blue-200":"hover:bg-gray-50 text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:t.icon}),e.jsx("span",{className:"font-medium",children:t.name})]}),t.count&&e.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:t.count})]})},t.id))]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>u("price"),className:"flex items-center justify-between w-full p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Ð¦ÐµÐ½Ð° (ÑÑƒÐ¼)"}),n.price?e.jsx(j,{className:"h-5 w-5 text-gray-500"}):e.jsx(N,{className:"h-5 w-5 text-gray-500"})]}),n.price&&e.jsxs("div",{className:"mt-3 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ÐžÑ‚"}),e.jsx("input",{type:"number",placeholder:"0",value:i.priceMin,onChange:t=>s("priceMin",t.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ð”Ð¾"}),e.jsx("input",{type:"number",placeholder:"ÐœÐ°ÐºÑÐ¸Ð¼ÑƒÐ¼",value:i.priceMax,onChange:t=>s("priceMax",t.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition-colors"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>u("brand"),className:"flex items-center justify-between w-full p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Ð‘Ñ€ÐµÐ½Ð´"}),n.brand?e.jsx(j,{className:"h-5 w-5 text-gray-500"}):e.jsx(N,{className:"h-5 w-5 text-gray-500"})]}),n.brand&&e.jsx("div",{className:"mt-3",children:e.jsx("input",{type:"text",placeholder:"ÐŸÐ¾Ð¸ÑÐº Ð±Ñ€ÐµÐ½Ð´Ð°...",value:i.brand,onChange:t=>s("brand",t.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition-colors"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>u("rating"),className:"flex items-center justify-between w-full p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Ð ÐµÐ¹Ñ‚Ð¸Ð½Ð³"}),n.rating?e.jsx(j,{className:"h-5 w-5 text-gray-500"}):e.jsx(N,{className:"h-5 w-5 text-gray-500"})]}),n.rating&&e.jsxs("div",{className:"mt-3 space-y-2",children:[[4,3,2,1].map(t=>e.jsx("button",{onClick:()=>s("rating",t.toString()),className:`w-full text-left px-4 py-3 rounded-lg transition-colors ${i.rating===t.toString()?"bg-blue-50 text-blue-600 border-2 border-blue-200":"hover:bg-gray-50 text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{children:["â˜…".repeat(t),"â˜†".repeat(5-t)]}),e.jsxs("span",{className:"font-medium",children:[t,"+ Ð·Ð²ÐµÐ·Ð´"]})]})},t)),e.jsx("button",{onClick:()=>s("rating",""),className:`w-full text-left px-4 py-3 rounded-lg transition-colors ${i.rating?"hover:bg-gray-50 text-gray-700":"bg-blue-50 text-blue-600 border-2 border-blue-200"}`,children:e.jsx("span",{className:"font-medium",children:"Ð›ÑŽÐ±Ð¾Ð¹ Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³"})})]})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:c,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:[e.jsx(O,{className:"h-5 w-5"}),e.jsx("span",{children:"Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ"})]}),e.jsx("button",{onClick:o,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹"})]})})]})})]}):null},le=()=>{const[m,o]=q(),v=G(),i=Q(),{t:s}=V(),[c,g]=r.useState([]),[n,b]=r.useState([]),[u,t]=r.useState(!0),[p,S]=r.useState(null),[E,k]=r.useState(!1),[y,M]=r.useState("grid"),[w,$]=r.useState("popularity"),[I,_]=r.useState(!1),[l,C]=r.useState({category:m.get("category")||"",priceMin:"",priceMax:"",brand:"",rating:""}),d=(()=>{const a=v.pathname;return a.includes("/brands")?"brands":a.includes("/sales")?"sales":a.includes("/new")?"new":"catalog"})(),P=r.useCallback(async()=>{t(!0),S(null);try{console.log("ðŸ” Ð—Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÐ¼ Ð´Ð°Ð½Ð½Ñ‹Ðµ ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð° Ð´Ð»Ñ:",d);const a=await X();if(console.log("ðŸ¥ API ÑÑ‚Ð°Ñ‚ÑƒÑ:",a),a){k(!0);const f=await J.getCategories();console.log("ðŸ“‚ ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸:",f),b(f.data||[]);const h={category:l.category,sortBy:w,page:1,limit:20,...d==="sales"&&{onSale:!0},...d==="new"&&{isNew:!0},...l.priceMin&&{priceMin:l.priceMin},...l.priceMax&&{priceMax:l.priceMax},...l.brand&&{brand:l.brand},...l.rating&&{rating:l.rating}};let x;d==="brands"?x=await L.getProducts(h):x=await L.getProducts(h),console.log("ðŸ›ï¸ Ð¢Ð¾Ð²Ð°Ñ€Ñ‹:",x),g(x.data||[])}else throw new Error("API Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½")}catch(a){console.error("âŒ ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð°:",a),S(s("failed_to_load_data","ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚Ñƒ.")),k(!1),b([]),g([])}finally{t(!1)}},[d,l,w,s]);r.useEffect(()=>{P()},[P]);const T=()=>{switch(d){case"brands":return s("all_brands","Ð’ÑÐµ Ð±Ñ€ÐµÐ½Ð´Ñ‹");case"sales":return s("sales_discounts","ÐÐºÑ†Ð¸Ð¸ Ð¸ ÑÐºÐ¸Ð´ÐºÐ¸");case"new":return s("new_products","ÐÐ¾Ð²Ð¸Ð½ÐºÐ¸");default:return s("product_catalog","ÐšÐ°Ñ‚Ð°Ð»Ð¾Ð³ Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð²")}},U=()=>{switch(d){case"brands":return s("popular_brands","ÐŸÐ¾Ð¿ÑƒÐ»ÑÑ€Ð½Ñ‹Ðµ Ð±Ñ€ÐµÐ½Ð´Ñ‹ Ð½Ð° Ð½Ð°ÑˆÐµÐ¼ Ð¼Ð°Ñ€ÐºÐµÑ‚Ð¿Ð»ÐµÐ¹ÑÐµ");case"sales":return s("best_offers","Ð›ÑƒÑ‡ÑˆÐ¸Ðµ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ð¸ ÑÐºÐ¸Ð´ÐºÐ¸ Ð´Ð¾ 70%");case"new":return s("latest_arrivals","ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ Ð¿Ð¾ÑÑ‚ÑƒÐ¿Ð»ÐµÐ½Ð¸Ñ Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð²");default:return s("wide_selection","Ð‘Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ð²Ñ‹Ð±Ð¾Ñ€ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ñ… Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð²")}},B=(a,f)=>{const h={...l,[a]:f};C(h);const x=new URLSearchParams;Object.entries(h).forEach(([z,F])=>{F&&x.set(z,F)}),o(x)},D=()=>{C({category:"",priceMin:"",priceMax:"",brand:"",rating:""}),o(new URLSearchParams),_(!1)};return u?e.jsx(K,{}):e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24 sm:pb-0",children:[e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("button",{onClick:()=>i(-1),className:"flex items-center text-blue-600 hover:text-blue-700 transition-colors mb-6",children:[e.jsx(W,{className:"mr-2"}),s("back","ÐÐ°Ð·Ð°Ð´")]}),e.jsxs("div",{className:"flex items-start space-x-4 mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(A,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:T()}),e.jsx("p",{className:"text-xl text-gray-600",children:U()}),e.jsxs("p",{className:"text-gray-500 mt-2 text-sm",children:[s("items","Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð²"),": ",c.length]})]})]}),!E&&p&&e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-yellow-800",children:p})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("button",{onClick:()=>_(!0),className:"lg:hidden flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:s("filter","Ð¤Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("label",{className:"text-sm text-gray-600",children:[s("sort_by","Ð¡Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ"),":"]}),e.jsxs("select",{value:w,onChange:a=>$(a.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"popularity",children:s("sort_by_popularity","ÐŸÐ¾ Ð¿Ð¾Ð¿ÑƒÐ»ÑÑ€Ð½Ð¾ÑÑ‚Ð¸")}),e.jsx("option",{value:"price_asc",children:s("sort_price_asc","Ð¦ÐµÐ½Ð°: Ð¿Ð¾ Ð²Ð¾Ð·Ñ€Ð°ÑÑ‚Ð°Ð½Ð¸ÑŽ")}),e.jsx("option",{value:"price_desc",children:s("sort_price_desc","Ð¦ÐµÐ½Ð°: Ð¿Ð¾ ÑƒÐ±Ñ‹Ð²Ð°Ð½Ð¸ÑŽ")}),e.jsx("option",{value:"rating",children:s("sort_by_rating","ÐŸÐ¾ Ñ€ÐµÐ¹Ñ‚Ð¸Ð½Ð³Ñƒ")}),e.jsx("option",{value:"new",children:s("sort_newest","Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð½Ð¾Ð²Ñ‹Ðµ")})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between lg:justify-end gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[s("items","Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð²"),": ",c.length]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>M("grid"),className:`p-2 rounded-lg transition-colors ${y==="grid"?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"}`,children:e.jsx(Y,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>M("list"),className:`p-2 rounded-lg transition-colors ${y==="list"?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"}`,children:e.jsx(Z,{className:"h-4 w-4"})})]})]})]})}),e.jsx("div",{className:`grid gap-6 ${y==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:c.length>0?c.map(a=>e.jsx(ee,{product:a,viewMode:y},a.id||a._id)):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(A,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s("no_products_found","Ð¢Ð¾Ð²Ð°Ñ€Ñ‹ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹")}),e.jsx("p",{className:"text-gray-600 mb-6",children:s("try_changing_filters","ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹ Ð¸Ð»Ð¸ Ð¿Ð¾Ð¸ÑÐºÐ¾Ð²Ñ‹Ð¹ Ð·Ð°Ð¿Ñ€Ð¾Ñ")}),e.jsx("button",{onClick:()=>{C({category:"",priceMin:"",priceMax:"",brand:"",rating:""}),o(new URLSearchParams)},className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:s("reset_filters","Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ñ„Ð¸Ð»ÑŒÑ‚Ñ€Ñ‹")})]})}),c.length>0&&e.jsx("div",{className:"flex items-center justify-center mt-8",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:s("prev","ÐŸÑ€ÐµÐ´Ñ‹Ð´ÑƒÑ‰Ð°Ñ")}),e.jsx("button",{className:"px-3 py-2 bg-blue-600 text-white rounded-lg",children:"1"}),e.jsx("button",{className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"2"}),e.jsx("button",{className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"3"}),e.jsx("button",{className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:s("next","Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð°Ñ")})]})})]}),e.jsx(se,{isOpen:I,onClose:()=>_(!1),categories:n,filters:l,onFilterChange:B,onResetFilters:D,totalProducts:c.length})]})};export{le as default};
