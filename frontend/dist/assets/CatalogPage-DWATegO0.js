import{r,j as e,t as R,F as H,an as j,v as N,ao as O,o as q,$ as G,b as Q,u as V,ap as X,aq as J,p as L,L as K,e as W,Q as A,w as Y,y as Z}from"./index-U3rPQCjX.js";import{P as ee}from"./ProductCard-CLp4hAdG.js";const se=({isOpen:m,onClose:o,categories:v,filters:i,onFilterChange:s,onResetFilters:c,totalProducts:g=0})=>{const[n,b]=r.useState({categories:!0,price:!1,brand:!1,rating:!1}),u=t=>{b(p=>({...p,[t]:!p[t]}))};return r.useEffect(()=>{m||b({categories:!0,price:!1,brand:!1,rating:!1})},[m]),m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden animate-fade-in",onClick:o}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white rounded-t-2xl shadow-2xl z-50 md:hidden max-h-[85vh] overflow-hidden animate-slide-up",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50 rounded-t-2xl",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-5 w-5 text-blue-600"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"–§–∏–ª—å—Ç—Ä—ã"}),g>0&&e.jsx("span",{className:"text-sm text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:g})]}),e.jsx("button",{onClick:o,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-lg transition-colors",children:e.jsx(H,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>u("categories"),className:"flex items-center justify-between w-full p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"–ö–∞—Ç–µ–≥–æ—Ä–∏–∏"}),n.categories?e.jsx(j,{className:"h-5 w-5 text-gray-500"}):e.jsx(N,{className:"h-5 w-5 text-gray-500"})]}),n.categories&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("button",{onClick:()=>s("category",""),className:`w-full text-left px-4 py-3 rounded-lg transition-colors ${i.category?"hover:bg-gray-50 text-gray-700":"bg-blue-50 text-blue-600 border-2 border-blue-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"}),e.jsx("span",{className:"text-sm text-gray-500",children:g})]})}),v.map(t=>e.jsx("button",{onClick:()=>s("category",t.id),className:`w-full text-left px-4 py-3 rounded-lg transition-colors ${i.category===t.id?"bg-blue-50 text-blue-600 border-2 border-blue-200":"hover:bg-gray-50 text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:t.icon}),e.jsx("span",{className:"font-medium",children:t.name})]}),t.count&&e.jsx("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:t.count})]})},t.id))]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>u("price"),className:"flex items-center justify-between w-full p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"–¶–µ–Ω–∞ (—Å—É–º)"}),n.price?e.jsx(j,{className:"h-5 w-5 text-gray-500"}):e.jsx(N,{className:"h-5 w-5 text-gray-500"})]}),n.price&&e.jsxs("div",{className:"mt-3 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"–û—Ç"}),e.jsx("input",{type:"number",placeholder:"0",value:i.priceMin,onChange:t=>s("priceMin",t.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"–î–æ"}),e.jsx("input",{type:"number",placeholder:"–ú–∞–∫—Å–∏–º—É–º",value:i.priceMax,onChange:t=>s("priceMax",t.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition-colors"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>u("brand"),className:"flex items-center justify-between w-full p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"–ë—Ä–µ–Ω–¥"}),n.brand?e.jsx(j,{className:"h-5 w-5 text-gray-500"}):e.jsx(N,{className:"h-5 w-5 text-gray-500"})]}),n.brand&&e.jsx("div",{className:"mt-3",children:e.jsx("input",{type:"text",placeholder:"–ü–æ–∏—Å–∫ –±—Ä–µ–Ω–¥–∞...",value:i.brand,onChange:t=>s("brand",t.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none transition-colors"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>u("rating"),className:"flex items-center justify-between w-full p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"–†–µ–π—Ç–∏–Ω–≥"}),n.rating?e.jsx(j,{className:"h-5 w-5 text-gray-500"}):e.jsx(N,{className:"h-5 w-5 text-gray-500"})]}),n.rating&&e.jsxs("div",{className:"mt-3 space-y-2",children:[[4,3,2,1].map(t=>e.jsx("button",{onClick:()=>s("rating",t.toString()),className:`w-full text-left px-4 py-3 rounded-lg transition-colors ${i.rating===t.toString()?"bg-blue-50 text-blue-600 border-2 border-blue-200":"hover:bg-gray-50 text-gray-700"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{children:["‚òÖ".repeat(t),"‚òÜ".repeat(5-t)]}),e.jsxs("span",{className:"font-medium",children:[t,"+ –∑–≤–µ–∑–¥"]})]})},t)),e.jsx("button",{onClick:()=>s("rating",""),className:`w-full text-left px-4 py-3 rounded-lg transition-colors ${i.rating?"hover:bg-gray-50 text-gray-700":"bg-blue-50 text-blue-600 border-2 border-blue-200"}`,children:e.jsx("span",{className:"font-medium",children:"–õ—é–±–æ–π —Ä–µ–π—Ç–∏–Ω–≥"})})]})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:c,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:[e.jsx(O,{className:"h-5 w-5"}),e.jsx("span",{children:"–°–±—Ä–æ—Å–∏—Ç—å"})]}),e.jsx("button",{onClick:o,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã"})]})})]})})]}):null},le=()=>{const[m,o]=q(),v=G(),i=Q(),{t:s}=V(),[c,g]=r.useState([]),[n,b]=r.useState([]),[u,t]=r.useState(!0),[p,S]=r.useState(null),[E,k]=r.useState(!1),[y,M]=r.useState("grid"),[w,$]=r.useState("popularity"),[I,_]=r.useState(!1),[l,C]=r.useState({category:m.get("category")||"",priceMin:"",priceMax:"",brand:"",rating:""}),d=(()=>{const a=v.pathname;return a.includes("/brands")?"brands":a.includes("/sales")?"sales":a.includes("/new")?"new":"catalog"})(),P=r.useCallback(async()=>{t(!0),S(null);try{console.log("üîç –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∞ –¥–ª—è:",d);const a=await X();if(console.log("üè• API —Å—Ç–∞—Ç—É—Å:",a),a){k(!0);const f=await J.getCategories();console.log("üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏:",f),b(f.data||[]);const h={category:l.category,sortBy:w,page:1,limit:20,...d==="sales"&&{onSale:!0},...d==="new"&&{isNew:!0},...l.priceMin&&{priceMin:l.priceMin},...l.priceMax&&{priceMax:l.priceMax},...l.brand&&{brand:l.brand},...l.rating&&{rating:l.rating}};let x;d==="brands"?x=await L.getProducts(h):x=await L.getProducts(h),console.log("üõçÔ∏è –¢–æ–≤–∞—Ä—ã:",x),g(x.data||[])}else throw new Error("API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω")}catch(a){console.error("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–∞–ª–æ–≥–∞:",a),S(s("failed_to_load_data","–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.")),k(!1),b([]),g([])}finally{t(!1)}},[d,l,w,s]);r.useEffect(()=>{P()},[P]);const T=()=>{switch(d){case"brands":return s("all_brands","–í—Å–µ –±—Ä–µ–Ω–¥—ã");case"sales":return s("sales_discounts","–ê–∫—Ü–∏–∏ –∏ —Å–∫–∏–¥–∫–∏");case"new":return s("new_products","–ù–æ–≤–∏–Ω–∫–∏");default:return s("product_catalog","–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤")}},U=()=>{switch(d){case"brands":return s("popular_brands","–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –±—Ä–µ–Ω–¥—ã –Ω–∞ –Ω–∞—à–µ–º –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ");case"sales":return s("best_offers","–õ—É—á—à–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∏ —Å–∫–∏–¥–∫–∏ –¥–æ 70%");case"new":return s("latest_arrivals","–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤");default:return s("wide_selection","–ë–æ–ª—å—à–æ–π –≤—ã–±–æ—Ä –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤")}},B=(a,f)=>{const h={...l,[a]:f};C(h);const x=new URLSearchParams;Object.entries(h).forEach(([z,F])=>{F&&x.set(z,F)}),o(x)},D=()=>{C({category:"",priceMin:"",priceMax:"",brand:"",rating:""}),o(new URLSearchParams),_(!1)};return u?e.jsx(K,{}):e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24 sm:pb-0",children:[e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("button",{onClick:()=>i(-1),className:"flex items-center text-blue-600 hover:text-blue-700 transition-colors mb-6",children:[e.jsx(W,{className:"mr-2"}),s("back","–ù–∞–∑–∞–¥")]}),e.jsxs("div",{className:"flex items-start space-x-4 mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(A,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:T()}),e.jsx("p",{className:"text-xl text-gray-600",children:U()}),e.jsxs("p",{className:"text-gray-500 mt-2 text-sm",children:[s("items","—Ç–æ–≤–∞—Ä–æ–≤"),": ",c.length]})]})]}),!E&&p&&e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-yellow-800",children:p})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("button",{onClick:()=>_(!0),className:"lg:hidden flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:s("filter","–§–∏–ª—å—Ç—Ä—ã")})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("label",{className:"text-sm text-gray-600",children:[s("sort_by","–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å"),":"]}),e.jsxs("select",{value:w,onChange:a=>$(a.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"popularity",children:s("sort_by_popularity","–ü–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏")}),e.jsx("option",{value:"price_asc",children:s("sort_price_asc","–¶–µ–Ω–∞: –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é")}),e.jsx("option",{value:"price_desc",children:s("sort_price_desc","–¶–µ–Ω–∞: –ø–æ —É–±—ã–≤–∞–Ω–∏—é")}),e.jsx("option",{value:"rating",children:s("sort_by_rating","–ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É")}),e.jsx("option",{value:"new",children:s("sort_newest","–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ")})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between lg:justify-end gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[s("items","—Ç–æ–≤–∞—Ä–æ–≤"),": ",c.length]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>M("grid"),className:`p-2 rounded-lg transition-colors ${y==="grid"?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"}`,children:e.jsx(Y,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>M("list"),className:`p-2 rounded-lg transition-colors ${y==="list"?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"}`,children:e.jsx(Z,{className:"h-4 w-4"})})]})]})]})}),e.jsx("div",{className:`grid gap-6 ${y==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:c.length>0?c.map(a=>e.jsx(ee,{product:a,viewMode:y},a.id||a._id)):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(A,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s("no_products_found","–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")}),e.jsx("p",{className:"text-gray-600 mb-6",children:s("try_changing_filters","–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –∏–ª–∏ –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å")}),e.jsx("button",{onClick:()=>{C({category:"",priceMin:"",priceMax:"",brand:"",rating:""}),o(new URLSearchParams)},className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:s("reset_filters","–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã")})]})}),c.length>0&&e.jsx("div",{className:"flex items-center justify-center mt-8",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:s("prev","–ü—Ä–µ–¥—ã–¥—É—â–∞—è")}),e.jsx("button",{className:"px-3 py-2 bg-blue-600 text-white rounded-lg",children:"1"}),e.jsx("button",{className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"2"}),e.jsx("button",{className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"3"}),e.jsx("button",{className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:s("next","–°–ª–µ–¥—É—é—â–∞—è")})]})})]}),e.jsx(se,{isOpen:I,onClose:()=>_(!1),categories:n,filters:l,onFilterChange:B,onResetFilters:D,totalProducts:c.length})]})};export{le as default};
